<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Produtos de tecnologia - Mundo Tech">
    <meta name="keywords" content="tecnologia, iPhone, produtos, Mundo Tech">
    <meta name="author" content="Mundo Tech">
    <meta name="robots" content="index, follow">
    <title>Produtos - Mundo Tech</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="animations.css">
    <link rel="stylesheet" href="produtos.css"> <!-- Link para o arquivo CSS dos produtos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
    <!-- Cabeçalho -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <h1>Mundo Tech</h1>
            </div>
            <nav class="navigation" aria-label="Navegação principal">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="produtos.html" class="active">Produtos</a></li>
                    <li><a href="favoritos.html">Favoritos</a></li>
                    <li><a href="carrinho.html">Carrinho</a></li>
                    <li><a href="fale-conosco.html">Fale Conosco</a></li>
                </ul>
            </nav>
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Pesquisar produto..." aria-label="Campo de pesquisa">
                <button onclick="redirectToSearch()">Buscar</button>
            </div>
        </div>
    </header>

    <!-- Conteúdo Principal -->
    <main class="container">
        <h1 class="page-title">Nossos Produtos</h1>

        <!-- Filtros de Produtos -->
        <div class="filtros">
            <h3>Filtrar por:</h3>
            <div class="filtro-group">
                <label for="filtro-preco">Preço:</label>
                <select id="filtro-preco" onchange="aplicarFiltros()">
                    <option value="todos">Todos</option>
                    <option value="0-100000">Até 100.000 Kz</option>
                    <option value="100000-200000">100.000 - 200.000 Kz</option>
                    <option value="200000-500000">200.000 - 500.000 Kz</option>
                    <option value="500000+">Acima de 500.000 Kz</option>
                </select>
            </div>
            <div class="filtro-group">
                <label for="filtro-tipo">Tipo de Produto:</label>
                <select id="filtro-tipo" onchange="aplicarFiltros()">
                    <option value="todos">Todos</option>
                    <option value="telefone">Telefones</option>
                    <option value="computador">Computadores</option>
                    <option value="teclado">Teclados</option>
                    <option value="fone">Fones de Ouvido</option>
                    <option value="mouse">Ratos (Mouse)</option>
                </select>
            </div>
            <div class="filtro-group">
                <label for="filtro-condicao">Condição:</label>
                <select id="filtro-condicao" onchange="aplicarFiltros()">
                    <option value="todos">Todos</option>
                    <option value="excelente">Excelente</option>
                    <option value="muito-bom">Muito Bom</option>
                    <option value="bom">Bom</option>
                    <option value="outlet">Outlet</option>
                    <option value="reembalado">Reembalado</option>
                </select>
            </div>
        </div>

        <!-- Lista de Produtos -->
        <div class="produtos-grid" id="produtos-grid">
            <!-- Produtos serão renderizados dinamicamente -->
        </div>
    </main>

    <!-- Rodapé -->
    <footer class="footer">
        <p>&copy; 2024 Mundo Tech. Todos os direitos reservados.</p>
        <p>Contato: <a href="tel:+244946419129">+244 946 419 129</a></p>
    </footer>

    <script>
        // Dados dos produtos
        const produtos = [
            { id: 1, nome: "iPhone XS Max", preco: 240000, tipo: "telefone", condicao: "excelente", imagem: "./img/image.png" },
            { id: 2, nome: "iPhone 7 Plus", preco: 70000, tipo: "telefone", condicao: "bom", imagem: "./img/image copy 3.png" },
            { id: 3, nome: "iPhone 12", preco: 350000, tipo: "telefone", condicao: "muito-bom", imagem: "./img/image copy 4.png" }
        ];

        let carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
        let favoritos = JSON.parse(localStorage.getItem('favoritos')) || [];

        // Função para renderizar os produtos
        function renderizarProdutos() {
            const produtosGrid = document.getElementById('produtos-grid');
            produtosGrid.innerHTML = '';

            produtos.forEach(produto => {
                const isFavorito = favoritos.some(f => f.id === produto.id);
                const produtoHTML = `
                    <article class="produto" data-preco="${produto.preco}" data-tipo="${produto.tipo}" data-condicao="${produto.condicao}">
                        <img src="${produto.imagem}" alt="${produto.nome}">
                        <div class="info">
                            <h3>${produto.nome}</h3>
                            <p class="preco">${produto.preco.toLocaleString('pt-BR')} Kz</p>
                            <p class="condicao">${produto.condicao}</p>
                            <button class="btn-favorito" onclick="toggleFavorito(${produto.id})">
                                <i class="fas fa-heart ${isFavorito ? 'favoritado' : ''}"></i>
                            </button>
                            <button class="btn-adicionar" onclick="adicionarAoCarrinho(${produto.id})">Adicionar ao Carrinho</button>
                            <a href="detalhesdoproduto.html?id=${produto.id}" class="btn-detalhes">Ver Detalhes</a>
                        </div>
                    </article>
                `;
                produtosGrid.innerHTML += produtoHTML;
            });
        }

        // Função para adicionar/remover favoritos
        function toggleFavorito(id) {
            const produto = produtos.find(p => p.id === id);
            const index = favoritos.findIndex(f => f.id === id);

            if (index === -1) {
                favoritos.push(produto);
            } else {
                favoritos.splice(index, 1);
            }

            localStorage.setItem('favoritos', JSON.stringify(favoritos));
            renderizarProdutos();
        }

        // Função para adicionar ao carrinho
        function adicionarAoCarrinho(id) {
            const produto = produtos.find(p => p.id === id);
            const itemNoCarrinho = carrinho.find(item => item.id === id);

            if (itemNoCarrinho) {
                itemNoCarrinho.quantidade += 1;
            } else {
                carrinho.push({ ...produto, quantidade: 1 });
            }

            localStorage.setItem('carrinho', JSON.stringify(carrinho));
            alert(`${produto.nome} adicionado ao carrinho!`);
        }

        // Aplicar filtros
        function aplicarFiltros() {
            const preco = document.getElementById('filtro-preco').value;
            const tipo = document.getElementById('filtro-tipo').value;
            const condicao = document.getElementById('filtro-condicao').value;

            const produtosFiltrados = produtos.filter(produto => {
                const precoValido = (preco === 'todos' || (preco === '0-100000' && produto.preco <= 100000) || 
                                      (preco === '100000-200000' && produto.preco >= 100000 && produto.preco <= 200000) || 
                                      (preco === '200000-500000' && produto.preco >= 200000 && produto.preco <= 500000) || 
                                      (preco === '500000+' && produto.preco > 500000));

                const tipoValido = (tipo === 'todos' || produto.tipo === tipo);
                const condicaoValida = (condicao === 'todos' || produto.condicao === condicao);

                return precoValido && tipoValido && condicaoValida;
            });

            // Atualiza os produtos exibidos
            produtos = produtosFiltrados;
            renderizarProdutos();
        }

        // Renderiza os produtos ao carregar a página
        document.addEventListener('DOMContentLoaded', renderizarProdutos);
    </script>
</body>

</html>
